{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nexport let LoginComponent = class LoginComponent {\n  constructor(route, serv) {\n    this.route = route;\n    this.serv = serv;\n    this.errmsg = new Err();\n    this.u1 = new User();\n  }\n  ngOnInit() {\n    console.log(\"At Login Page\");\n    let x = sessionStorage.getItem('username');\n    if (x == null && !sessionStorage.getItem('lg')) {\n      document.location.reload();\n      sessionStorage.setItem('lg', \"1\");\n      history.pushState(null, '');\n    }\n  }\n  gotoreg() {\n    this.route.navigate(['register']);\n  }\n  login(data) {\n    console.log(data);\n    this.serv.login(data).subscribe(data1 => {\n      console.log(data1);\n      if ('username' in data1 && 'role' in data1 && 'id' in data1 && data1.username != null && data1.role != null && data1.id != null) {\n        console.log(\"User Found\" + data1);\n        sessionStorage.setItem('username', data1.username);\n        sessionStorage.setItem('role', data1.role?.toString());\n        sessionStorage.setItem('id', data1.id?.toString());\n        this.u1 = data1;\n        if (data1.role?.toString() == \"User\") {\n          this.route.navigate(['home']);\n        } else {\n          this.route.navigate(['allreport']);\n        }\n      } else if ('msg' in data1 && data1.msg != null) {\n        this.errmsg = data1;\n        console.log(this.errmsg);\n      }\n    });\n  }\n};\nLoginComponent = __decorate([Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})], LoginComponent);","map":{"version":3,"names":["Component","LoginComponent","constructor","route","serv","errmsg","Err","u1","User","ngOnInit","console","log","x","sessionStorage","getItem","document","location","reload","setItem","history","pushState","gotoreg","navigate","login","data","subscribe","data1","username","role","id","toString","msg","__decorate","selector","templateUrl","styleUrls"],"sources":["F:\\PROFFESIONAL DOCS\\MY - Coding\\my language\\Jforce Sol\\attendanceApp\\src\\app\\comp\\login\\login.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.css']\n})\nexport class LoginComponent {\n\n  public errmsg:Err= new Err();\n  \n  public u1:User = new User();\n\n  constructor(private route:Router,private serv:DataService){}\n  ngOnInit(){\n    console.log(\"At Login Page\");\n    let x =sessionStorage.getItem('username');\n    if(x==null &&  !sessionStorage.getItem('lg')  ){\n      document.location.reload();\n      sessionStorage.setItem('lg',\"1\");\n      history.pushState(null,'');\n    }\n  }\n  gotoreg(){\n   this.route.navigate(['register']);\n  }\n\n  login(data:LoginComponent){\n    console.log(data);\n    this.serv.login(data).subscribe(data1=>{\n     console.log(data1);\n      if('username' in data1 && 'role' in data1 && 'id' in data1 && data1.username!=null && data1.role!=null && data1.id!=null){\n        console.log(\"User Found\"+data1);\n        sessionStorage.setItem('username',data1.username);\n        sessionStorage.setItem('role',data1.role?.toString());\n        sessionStorage.setItem('id',data1.id?.toString());\n        this.u1=data1;\n        if(data1.role?.toString()==\"User\"){\n          this.route.navigate(['home']);\n        }else{\n          this.route.navigate(['allreport']);\n        }\n       \n      }else if('msg' in data1 && data1.msg!=null){\n        this.errmsg = data1;\n        console.log(this.errmsg);\n      }\n      \n    })\n\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAOlC,WAAMC,cAAc,GAApB,MAAMA,cAAc;EAMzBC,YAAoBC,KAAY,EAASC,IAAgB;IAArC,KAAAD,KAAK,GAALA,KAAK;IAAgB,KAAAC,IAAI,GAAJA,IAAI;IAJtC,KAAAC,MAAM,GAAM,IAAIC,GAAG,EAAE;IAErB,KAAAC,EAAE,GAAQ,IAAIC,IAAI,EAAE;EAEgC;EAC3DC,QAAQA,CAAA;IACNC,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC;IAC5B,IAAIC,CAAC,GAAEC,cAAc,CAACC,OAAO,CAAC,UAAU,CAAC;IACzC,IAAGF,CAAC,IAAE,IAAI,IAAK,CAACC,cAAc,CAACC,OAAO,CAAC,IAAI,CAAC,EAAG;MAC7CC,QAAQ,CAACC,QAAQ,CAACC,MAAM,EAAE;MAC1BJ,cAAc,CAACK,OAAO,CAAC,IAAI,EAAC,GAAG,CAAC;MAChCC,OAAO,CAACC,SAAS,CAAC,IAAI,EAAC,EAAE,CAAC;;EAE9B;EACAC,OAAOA,CAAA;IACN,IAAI,CAAClB,KAAK,CAACmB,QAAQ,CAAC,CAAC,UAAU,CAAC,CAAC;EAClC;EAEAC,KAAKA,CAACC,IAAmB;IACvBd,OAAO,CAACC,GAAG,CAACa,IAAI,CAAC;IACjB,IAAI,CAACpB,IAAI,CAACmB,KAAK,CAACC,IAAI,CAAC,CAACC,SAAS,CAACC,KAAK,IAAE;MACtChB,OAAO,CAACC,GAAG,CAACe,KAAK,CAAC;MACjB,IAAG,UAAU,IAAIA,KAAK,IAAI,MAAM,IAAIA,KAAK,IAAI,IAAI,IAAIA,KAAK,IAAIA,KAAK,CAACC,QAAQ,IAAE,IAAI,IAAID,KAAK,CAACE,IAAI,IAAE,IAAI,IAAIF,KAAK,CAACG,EAAE,IAAE,IAAI,EAAC;QACvHnB,OAAO,CAACC,GAAG,CAAC,YAAY,GAACe,KAAK,CAAC;QAC/Bb,cAAc,CAACK,OAAO,CAAC,UAAU,EAACQ,KAAK,CAACC,QAAQ,CAAC;QACjDd,cAAc,CAACK,OAAO,CAAC,MAAM,EAACQ,KAAK,CAACE,IAAI,EAAEE,QAAQ,EAAE,CAAC;QACrDjB,cAAc,CAACK,OAAO,CAAC,IAAI,EAACQ,KAAK,CAACG,EAAE,EAAEC,QAAQ,EAAE,CAAC;QACjD,IAAI,CAACvB,EAAE,GAACmB,KAAK;QACb,IAAGA,KAAK,CAACE,IAAI,EAAEE,QAAQ,EAAE,IAAE,MAAM,EAAC;UAChC,IAAI,CAAC3B,KAAK,CAACmB,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;SAC9B,MAAI;UACH,IAAI,CAACnB,KAAK,CAACmB,QAAQ,CAAC,CAAC,WAAW,CAAC,CAAC;;OAGrC,MAAK,IAAG,KAAK,IAAII,KAAK,IAAIA,KAAK,CAACK,GAAG,IAAE,IAAI,EAAC;QACzC,IAAI,CAAC1B,MAAM,GAAGqB,KAAK;QACnBhB,OAAO,CAACC,GAAG,CAAC,IAAI,CAACN,MAAM,CAAC;;IAG5B,CAAC,CAAC;EAEJ;CAED;AA7CYJ,cAAc,GAAA+B,UAAA,EAL1BhC,SAAS,CAAC;EACTiC,QAAQ,EAAE,WAAW;EACrBC,WAAW,EAAE,wBAAwB;EACrCC,SAAS,EAAE,CAAC,uBAAuB;CACpC,CAAC,C,EACWlC,cAAc,CA6C1B","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}